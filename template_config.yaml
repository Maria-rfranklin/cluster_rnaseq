# path or URL to sample sheet
samples: samples.tsv

# path or URL to sequencing unit sheet
units: units.tsv

# path to the results directory
outdir: 'results'

# path to the logs directory
logdir: 'logs'

## ALIGNER ##
# 0 = STAR, 1 = SALMON, 2 = HISAT2
aligner: 0

## QUANTIFIER ##
# 0 = HTSEQ, 1 = FEATURECOUNTS
quantifier: 1


# genomic reference sequences and annotations for aligners and quantifiers
ref:
    star:
        annotation: "/my/annotation.gtf"
        # fasta file with transcripts
        fasta: "/my/genome.fasta"
        # STAR aligner index path (auto generated if not already present)
        # Deafult: Cluster's shared index
        #star_index: "/storage/scratch01/shared/indexes/h_sapiens/gencode/v38/star/2.7.9a"
        star_index: "/my/genome_idx"
    
    salmon: 
       # salmon transcriptome: .fa.gz
        transcriptome: "/path/to/salmon/transcriptome"
        # salmon genome assembly: .ga.gz
        genome_assembly: "/path/to/salmon/genome_assembly"
        # Salmon aligner index path (auto generated if not already present)
        # Deafult: Cluster's shared index
        #salmon_index: "/storage/scratch01/shared/indexes/h_sapiens/gencode/v38/salmon/1.5.2"
        salmon_index: "/my/genome_idx"
    
    hisat2:
        annotation: "/my/annotation.gtf"
        # fasta file with transcripts
        fasta: "/my/genome.fasta"
        # HISAT2 aligner index path (auto generated if not already present)
        hisat2_index: "/my/genome_idx"


parameters:
    downsampling:
        enabled: False
        n: 10000000 # Downsample to 10 million reads
        seed: 12345

    trimming:
        adapters: "resources/trimming/adapters.fa"
        extra: " ktrim=r k=23 mink=11 hdist=1"

    fastq_screen: # "--conf res/config/fastq_screen.config"
        enabled: False
        subset: 100000
        aligner: "bowtie2"
        # This section allows you to configure multiple databases to search against 
        # in your screen.  For each database you need to provide a database name 
        # (which can't contain spaces) and the location of the bowtie indices which 
        # you created for that database.  The path to the index files SHOULD INCLUDE 
        # THE BASENAME of the index. You can you can comment out or remove as many of 
        # the existing entries as you like.
        fastq_screen_config: 
            database: 
                Human:
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/Human/Homo_sapiens.GRCh38"
                    browtie: ""
                Mouse: 
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/Mouse/Mus_musculus.GRCm38"
                    browtie: ""
                Rat:
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/Rat/Rnor_6.0"
                    browtie: ""
                Drosophila:
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/Drosophila/BDGP6"
                    browtie: ""
                Worm:
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/Worm/Caenorhabditis_elegans.WBcel235"
                    browtie: ""
                Yeast:
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/Yeast/Saccharomyces_cerevisiae.R64-1-1"
                    browtie2: ""  
                Arabidopsis:
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/Arabidopsis/Arabidopsis_thaliana.TAIR10"
                    browtie: ""
                Ecoli: 
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/E_coli/Ecoli"
                    browtie: ""
                rRNA: # In house custom database.
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/rRNA/GRCm38_rRNA"
                    browtie: ""
                MT:
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/Mitochondria/mitochondria"
                    browtie: ""
                PhiX:
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/PhiX/phi_plus_SNPs"
                    browtie: ""
                Lambda:
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/Lambda/Lambda"
                    browtie: ""
                Vectors: 
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/Vectors/Vectors"
                    browtie: ""
                Adapters:
                    browtie2: "/storage/scratch01/shared/databases/fastq_screen/20211109/Adapters/Contaminants"
                    browtie: ""
            aligner_paths: 
                browtie: "browtie"
                browtie2: "browtie2"
                   
    ## set it to A for automatic library detection.
    ## https://salmon.readthedocs.io/en/latest/salmon.html
    salmon:
        libtype: 'A'
        adapters: ""
        extra: ""
    
    salmon_index:
        gencode: False ## Set to True if transcriptome source is gencode
    
    multiqc: "--config res/config/multiqc_config.yaml"

    htseq-count:
        # Mode: "union", "intersection-strict" or "intersection-nonempty" (default: union)
        mode: "-m union"
        # Strandness: "yes", "no" or "reverse" (default: yes)
        strandedness: "-s yes"

    featureCounts:
        # Feature type sets to gene by default because it seems that improve the results
        extra: "-t 'gene'"
        # Strandness: 0 = "unstranded", 1 = "stranded", 2 = "reversely stranded" (default: 0)
        strandedness: "-s 1"

    deseq2:
        # path or URL to design matrix
        designmatrix: "designmatrix.tsv"
        design: "~date + condition"



resources:
    default:
        threads: 1
        mem_mb:  4096
        walltime: 10
        
    fastqc:
        threads: 1
        mem_mb:  4096
        walltime: 10
    
    fastq_screen:
        threads: 8
        mem_mb: 4096
        walltime: 10
        
    multiqc:
        threads: 8
        mem_mb:  4096
        walltime: 10

    concat:
        threads: 1
        mem_mb:  4096
        walltime: 10

    downsample_single_end:
        threads: 1
        mem_mb:  8192
        walltime: 60
    
    downsample_paired_end:
        threads: 1
        mem_mb:  8192
        walltime: 60

    trim_adapters_single_end:
        threads: 8
        mem_mb:  8192
        walltime: 60
        
    trim_adapters_paired_end:
        threads: 8
        mem_mb:  8192
        walltime: 60
 
    salmon_quant:
        threads: 20
        mem_mb: 32000
        walltime: 10

    star_align:
        threads: 8
        mem_mb: 64000
        walltime: 60

    hisat2_align:
        threads: 8
        mem_mb: 64000
        walltime: 60
    
    hisat2_sort:
        threads: 8
        mem_mb:  64000
        walltime: 60

    bam_indexing:
        threads: 8
        mem_mb:  4096
        walltime: 10
        
    htseq_count:
        threads: 8
        mem_mb:  64000
        walltime: 120

    featureCounts:
        threads: 8
        mem_mb:  64000
        walltime: 120
    
    fcounts_count_matrix:
        threads: 8
        mem_mb:  64000
        walltime: 120
    
    salmon_matrix_from_quants:
        threads: 1
        mem_mb: 4096
        walltime: 10
        
    salmon_index:
        threads: 32
        mem_mb: 64000
        walltime: 180

    star_index:
        threads: 8
        mem_mb: 64000
        walltime: 720

    hisat2_index:
        threads: 32
        mem_mb: 64000
        walltime: 180
    
    htseq_count_matrix:
        threads: 1
        mem_mb:  4096
        walltime: 10
    
    deseq2_init:
        threads: 4
        mem_mb:  8192
        walltime: 10
    
    deseq2_diffexp:
        threads: 2
        mem_mb:  4096
        walltime: 10
    
    pca:
        threads: 1
        mem_mb:  4096
        walltime: 10
    
    ma:
        threads: 1
        mem_mb:  4096
        walltime: 10

    distance:
        threads: 1
        mem_mb:  4096
        walltime: 10

    expression_heatmap:
        threads: 1
        mem_mb:  4096
        walltime: 10